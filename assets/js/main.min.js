document.addEventListener('DOMContentLoaded',function(){initNavigation();initLastUpdated();initAccessibility()});function initNavigation(){const navToggle=document.querySelector('.nav__toggle');const navMenu=document.querySelector('.nav__menu');const navLinks=document.querySelectorAll('.nav__link');if(!navToggle||!navMenu)return;navToggle.addEventListener('click',function(){const isOpen=navMenu.classList.contains('nav__menu--open');if(isOpen){closeNavMenu()}else{openNavMenu()}});navLinks.forEach(link=>{link.addEventListener('click',function(){if(window.innerWidth<=768){closeNavMenu()}})});document.addEventListener('click',function(event){const isClickInsideNav=navToggle.contains(event.target)||navMenu.contains(event.target);if(!isClickInsideNav&&navMenu.classList.contains('nav__menu--open')){closeNavMenu()}});window.addEventListener('resize',function(){if(window.innerWidth>768){closeNavMenu()}});navToggle.addEventListener('keydown',function(event){if(event.key==='Enter'||event.key===' '){event.preventDefault();navToggle.click()}});setActiveNavigation()}function openNavMenu(){const navToggle=document.querySelector('.nav__toggle');const navMenu=document.querySelector('.nav__menu');const hamburger=document.querySelector('.nav__hamburger');navMenu.classList.add('nav__menu--open');navToggle.setAttribute('aria-expanded','true');navToggle.setAttribute('aria-label','Close navigation menu');if(hamburger){hamburger.style.transform='rotate(45deg)';hamburger.style.backgroundColor='transparent'}const firstLink=navMenu.querySelector('.nav__link');if(firstLink){setTimeout(()=>firstLink.focus(),100)}}function closeNavMenu(){const navToggle=document.querySelector('.nav__toggle');const navMenu=document.querySelector('.nav__menu');const hamburger=document.querySelector('.nav__hamburger');navMenu.classList.remove('nav__menu--open');navToggle.setAttribute('aria-expanded','false');navToggle.setAttribute('aria-label','Toggle navigation menu');if(hamburger){hamburger.style.transform='rotate(0deg)';hamburger.style.backgroundColor='var(--color-gray-700)'}}function setActiveNavigation(){const currentPage=window.location.pathname.split('/').pop()||'index.html';const navLinks=document.querySelectorAll('.nav__link');navLinks.forEach(link=>{link.classList.remove('nav__link--active');const linkHref=link.getAttribute('href');if((currentPage==='index.html'&&linkHref==='index.html')||(currentPage===''&&linkHref==='index.html')||(currentPage==='/'&&linkHref==='index.html')||linkHref===currentPage){link.classList.add('nav__link--active');link.setAttribute('aria-current','page')}else{link.removeAttribute('aria-current')}})}function initLastUpdated(){const lastUpdatedElement=document.getElementById('last-updated');if(lastUpdatedElement){const currentDate=new Date();const options={year: 'numeric',month: 'long'};lastUpdatedElement.textContent=currentDate.toLocaleDateString('en-US',options)}}function initAccessibility(){addSkipLink();initFocusManagement();initKeyboardNavigation()}function addSkipLink(){const skipLink=document.createElement('a');skipLink.href='#main-content';skipLink.textContent='Skip to main content';skipLink.className='skip-link';skipLink.style.cssText=` position: absolute;top:-40px;left: 6px;background: var(--color-primary);color: white;padding: 8px;text-decoration: none;border-radius: 4px;z-index: 1000;transition: top 0.3s;`;skipLink.addEventListener('focus',function(){this.style.top='6px'});skipLink.addEventListener('blur',function(){this.style.top='-40px'});document.body.insertBefore(skipLink,document.body.firstChild);const main=document.querySelector('main');if(main&&!main.id){main.id='main-content'}}function initFocusManagement(){document.addEventListener('keydown',function(event){if(event.key==='Tab'){document.body.classList.add('keyboard-navigation')}});document.addEventListener('mousedown',function(){document.body.classList.remove('keyboard-navigation')})}function initKeyboardNavigation(){document.addEventListener('keydown',function(event){if(event.key==='Escape'){const navMenu=document.querySelector('.nav__menu');if(navMenu&&navMenu.classList.contains('nav__menu--open')){closeNavMenu();document.querySelector('.nav__toggle').focus()}}})}function debounce(func,wait){let timeout;return function executedFunction(...args){const later=()=>{clearTimeout(timeout);func(...args)};clearTimeout(timeout);timeout=setTimeout(later,wait)}}function smoothScrollTo(targetId){const target=document.getElementById(targetId);if(target){target.scrollIntoView({behavior: 'smooth',block: 'start'})}}function initScrollAnimations(){if('IntersectionObserver' in window){const observerOptions={threshold: 0.1,rootMargin: '0px 0px-50px 0px'};const observer=new IntersectionObserver(function(entries){entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('animate-in')}})},observerOptions);document.querySelectorAll('.animate-on-scroll').forEach(el=>{observer.observe(el)})}}window.PortfolioApp={openNavMenu,closeNavMenu,setActiveNavigation,smoothScrollTo,debounce};function initFooter(){initBackToTopButton();initNewsletterForm();initFooterAnimations();initFooterAnalytics()}function initBackToTopButton(){const backToTopButton=document.getElementById('back-to-top');if(!backToTopButton)return;function toggleBackToTopButton(){const scrollTop=window.pageYOffset||document.documentElement.scrollTop;const showThreshold=300;if(scrollTop>showThreshold){backToTopButton.classList.add('footer__back-to-top--visible')}else{backToTopButton.classList.remove('footer__back-to-top--visible')}}let scrollTimeout;window.addEventListener('scroll',function(){if(scrollTimeout){clearTimeout(scrollTimeout)}scrollTimeout=setTimeout(toggleBackToTopButton,10)});backToTopButton.addEventListener('click',function(){window.scrollTo({top: 0,behavior: 'smooth'});trackFooterEvent('back_to_top_clicked');setTimeout(()=>{const skipLink=document.querySelector('.skip-link');if(skipLink){skipLink.focus()}else{document.body.focus()}},500)});backToTopButton.addEventListener('keydown',function(event){if(event.key==='Enter'||event.key===' '){event.preventDefault();backToTopButton.click()}});toggleBackToTopButton()}function initNewsletterForm(){const newsletterForm=document.getElementById('newsletter-form');if(!newsletterForm)return;const emailInput=newsletterForm.querySelector('.footer__newsletter-input');const submitButton=newsletterForm.querySelector('.footer__newsletter-btn');newsletterForm.addEventListener('submit',async function(event){event.preventDefault();const email=emailInput.value.trim();if(!isValidEmail(email)){showNewsletterMessage('Please enter a valid email address.','error');return}setNewsletterLoading(true);try{await simulateNewsletterSubscription(email);showNewsletterMessage('Thank you for subscribing!','success');emailInput.value='';trackFooterEvent('newsletter_subscribed',{email: email})}catch(error){showNewsletterMessage('Something went wrong. Please try again.','error');trackFooterEvent('newsletter_error',{error: error.message})}finally{setNewsletterLoading(false)}});emailInput.addEventListener('input',function(){const email=emailInput.value.trim();if(email&&!isValidEmail(email)){emailInput.classList.add('footer__newsletter-input--error')}else{emailInput.classList.remove('footer__newsletter-input--error')}})}function isValidEmail(email){const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return emailRegex.test(email)}function simulateNewsletterSubscription(email){return new Promise((resolve,reject)=>{setTimeout(()=>{if(Math.random()>0.05){resolve({success: true})}else{reject(new Error('Network error'))}},1500)})}function setNewsletterLoading(isLoading){const submitButton=document.querySelector('.footer__newsletter-btn');const emailInput=document.querySelector('.footer__newsletter-input');if(isLoading){submitButton.textContent='Subscribing...';submitButton.disabled=true;emailInput.disabled=true}else{submitButton.textContent='Subscribe';submitButton.disabled=false;emailInput.disabled=false}}function showNewsletterMessage(message,type){const existingMessage=document.querySelector('.footer__newsletter-message');if(existingMessage){existingMessage.remove()}const messageElement=document.createElement('div');messageElement.className=`footer__newsletter-message footer__newsletter-message--${type}`;messageElement.textContent=message;const newsletterForm=document.getElementById('newsletter-form');newsletterForm.appendChild(messageElement);setTimeout(()=>{if(messageElement.parentNode){messageElement.remove()}},5000)}function initFooterAnimations(){if('IntersectionObserver' in window){const observerOptions={threshold: 0.1,rootMargin: '0px 0px-50px 0px'};const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('footer__section--visible')}})},observerOptions);document.querySelectorAll('.footer__section').forEach(section=>{observer.observe(section)})}}function initFooterAnalytics(){const footerLinks=document.querySelectorAll('.footer__nav-link,.footer__link,.footer__social-link');footerLinks.forEach(link=>{link.addEventListener('click',function(){const linkText=link.textContent.trim();const linkType=link.classList.contains('footer__social-link')? 'social' : 'navigation';trackFooterEvent('footer_link_clicked',{link_text: linkText,link_type: linkType,link_url: link.href})})});if('IntersectionObserver' in window){const footerObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){trackFooterEvent('footer_viewed');footerObserver.unobserve(entry.target)}})},{threshold: 0.5});const footer=document.querySelector('.footer');if(footer){footerObserver.observe(footer)}}}function trackFooterEvent(eventName,data={}){if(typeof gtag!=='undefined'){gtag('event',eventName,{'footer_interaction': true,...data})}console.log(`Footer event: ${eventName}`,data)}function initEnhancedFooter(){initFooter();addFooterKeyboardShortcuts();initFooterHealthCheck();enhanceFooterAccessibility()}function addFooterKeyboardShortcuts(){document.addEventListener('keydown',function(event){if(event.target.tagName==='INPUT'||event.target.tagName==='TEXTAREA'){return}if((event.ctrlKey||event.metaKey)&&event.key==='Home'){event.preventDefault();const backToTopButton=document.getElementById('back-to-top');if(backToTopButton){backToTopButton.click()}}if((event.ctrlKey||event.metaKey)&&event.key==='End'){event.preventDefault();const footer=document.querySelector('.footer');if(footer){footer.scrollIntoView({behavior: 'smooth'});trackFooterEvent('keyboard_scroll_to_footer')}}})}function initFooterHealthCheck(){const socialLinks=document.querySelectorAll('.footer__social-link');let placeholderCount=0;socialLinks.forEach(link=>{if(link.href.includes('example.com')||link.href==='#'){placeholderCount++;link.classList.add('footer__social-link--placeholder')}});if(placeholderCount>0){console.warn(`${placeholderCount}placeholder social links found in footer. Please update with actual URLs.`)}}function enhanceFooterAccessibility(){const footer=document.querySelector('.footer');if(footer&&!footer.getAttribute('role')){footer.setAttribute('role','contentinfo')}const newsletterInput=document.querySelector('.footer__newsletter-input');if(newsletterInput){newsletterInput.setAttribute('autocomplete','email');newsletterInput.setAttribute('spellcheck','false')}addFooterSkipLink()}function addFooterSkipLink(){const footer=document.querySelector('.footer');if(!footer)return;const skipToFooter=document.createElement('a');skipToFooter.href='#footer';skipToFooter.textContent='Skip to footer';skipToFooter.className='skip-link skip-link--footer';skipToFooter.style.cssText=` position: absolute;top:-40px;left: 6px;background: var(--color-primary);color: white;padding: 8px;text-decoration: none;border-radius: 4px;z-index: 1000;transition: top 0.3s;`;skipToFooter.addEventListener('focus',function(){this.style.top='6px'});skipToFooter.addEventListener('blur',function(){this.style.top='-40px'});document.body.insertBefore(skipToFooter,footer);footer.id='footer'}document.addEventListener('DOMContentLoaded',function(){initEnhancedFooter()});window.PortfolioApp={...window.PortfolioApp,initEnhancedFooter,trackFooterEvent};